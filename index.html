<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>NIDAAN MATFLOW ‚Äì Ultra Premium</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700;800&display=swap');

*{
  box-sizing:border-box;
  font-family:'Poppins',sans-serif;
}

body{
  margin:0;
  height:100vh;
  overflow:hidden;
  background:linear-gradient(135deg,#ff6f00,#ff9800,#ffb74d);
  background-size:300% 300%;
  animation:bgMove 12s ease infinite;
}

@keyframes bgMove{
  0%{background-position:0% 50%}
  50%{background-position:100% 50%}
  100%{background-position:0% 50%}
}

/* HEADER */
header{
  position:fixed;
  top:12px;
  left:50%;
  transform:translateX(-50%);
  width:95%;
  z-index:100;
  backdrop-filter:blur(14px);
  background:rgba(255,255,255,0.25);
  text-align:center;
  padding:14px 18px 16px;
  border-radius:18px;
  box-shadow:0 10px 30px rgba(0,0,0,0.2);
}

.title-main{
  font-size:28px;
  font-weight:800;
  letter-spacing:1px;
  color:#ffffff;
}

.title-sub{
  font-size:14px;
  font-weight:600;
  font-style:italic;
  color:#ffffff;
  margin-top:4px;
}

#darkToggle{
  position:absolute;
  right:14px;
  top:14px;
  width:42px;
  height:42px;
  border-radius:50%;
  border:none;
  cursor:pointer;
  font-size:18px;
  background:rgba(0,0,0,0.3);
  color:#fff;
}

/* CHAT */
.chat-area{
  position:absolute;
  top:110px;
  bottom:100px;
  left:0; right:0;
  padding:20px;
  overflow-y:auto;
  display:flex;
  flex-direction:column;
  gap:14px;
  scroll-behavior:smooth;
}

.message{
  padding:14px 18px;
  border-radius:20px;
  max-width:70%;
  font-size:16px;
  line-height:1.6;
  backdrop-filter:blur(12px);
  animation:slideUp 0.3s ease;
}

@keyframes slideUp{
  from{transform:translateY(15px);opacity:0;}
  to{transform:translateY(0);opacity:1;}
}

.user{
  align-self:flex-end;
  background:rgba(255,224,178,0.95);
  color:#4e342e;
  box-shadow:0 8px 20px rgba(0,0,0,0.15);
}

.ai{
  align-self:flex-start;
  background:rgba(255,255,255,0.95);
  color:#333;
  box-shadow:0 8px 20px rgba(0,0,0,0.15);
}

.typing{background:rgba(255,236,179,0.95);font-weight:600;}

.time{
  font-size:11px;
  opacity:0.5;
  margin-top:4px;
  text-align:right;
}

/* FOOTER */
footer{
  position:fixed;
  bottom:12px;
  left:50%;
  transform:translateX(-50%);
  width:95%;
  z-index:100;
  display:flex;
  gap:10px;
  padding:14px;
  background:rgba(255,255,255,0.35);
  backdrop-filter:blur(14px);
  border-radius:20px;
  box-shadow:0 -6px 25px rgba(0,0,0,0.2);
}

input{
  flex:1;
  padding:14px 18px;
  font-size:15px;
  border-radius:25px;
  border:none;
  outline:none;
  background:rgba(255,255,255,0.9);
}

button{
  width:48px;
  height:48px;
  border-radius:50%;
  border:none;
  font-size:18px;
  cursor:pointer;
  transition:0.2s ease;
  display:flex;
  align-items:center;
  justify-content:center;
}

#micBtn{
  background:linear-gradient(135deg,#ff8f00,#ff6f00);
  color:#fff;
}

#sendBtn{
  background:linear-gradient(135deg,#ff5722,#ff9800);
  color:#fff;
}

/* DARK MODE */
body.dark{
  background:linear-gradient(135deg,#121212,#1c1c1c);
}

body.dark header,
body.dark footer{
  background:rgba(0,0,0,0.5);
}

body.dark .title-main,
body.dark .title-sub{
  color:#fff;
}

body.dark input{
  background:rgba(30,30,30,0.8);
  color:#fff;
}

body.dark .ai{
  background:rgba(30,30,30,0.85);
  color:#fff3e0;
}

body.dark .user{
  background:rgba(255,183,77,0.9);
  color:#000;
}
</style>
</head>

<body>

<header>
  <div class="title-main">NIDAAN MATFLOW</div>
  <div class="title-sub">(Your Intelligent Material Management)</div>
  <button id="darkToggle">üåô</button>
</header>

<div class="chat-area" id="chatArea">
  <div class="message ai">
    Hello üëã I‚Äôm <b>NIDAAN</b> ‚Äî Your Intelligent Material Management Solution. How may I help you?
    <div class="time"></div>
  </div>
</div>

<footer>
  <input id="userInput" type="text" placeholder="Type your query..." autocomplete="off">
  <button id="micBtn">üé§</button>
  <button id="sendBtn">‚û§</button>
</footer>

<script>
const input = document.getElementById("userInput");
const chat = document.getElementById("chatArea");
const sendBtn = document.getElementById("sendBtn");
const micBtn = document.getElementById("micBtn");
const darkToggle = document.getElementById("darkToggle");

const WEBHOOK_URL = "https://n8n-oazxlbnc.us-west-1.clawcloudrun.com/webhook-test/0c2786aa-168f-4877-b716-869dd1c43095";

darkToggle.onclick = () => {
  document.body.classList.toggle("dark");
  darkToggle.textContent = document.body.classList.contains("dark") ? "‚òÄ" : "üåô";
};

function now(){
  return new Date().toLocaleTimeString([], { hour:'2-digit', minute:'2-digit' });
}

function scrollBottom(){
  chat.scrollTop = chat.scrollHeight;
}

sendBtn.onclick = sendMessage;
input.addEventListener("keydown", e => {
  if(e.key === "Enter") sendMessage();
});

function sendMessage(){
  const text = input.value.trim();
  if(!text) return;

  const user = document.createElement("div");
  user.className = "message user";
  user.innerHTML = `${text}<div class="time">${now()}</div>`;
  chat.appendChild(user);
  input.value = "";
  scrollBottom();

  const typing = document.createElement("div");
  typing.className = "message ai typing";
  typing.innerHTML = "NIDAAN is typing...";
  chat.appendChild(typing);
  scrollBottom();

  fetch(WEBHOOK_URL, {
    method: "POST",
    headers: {"Content-Type": "application/json"},
    body: JSON.stringify({ message: text })
  })
  .then(res => res.json())
  .then(data => {
    typing.remove();
    const reply = data.reply || data.text || JSON.stringify(data);
    const ai = document.createElement("div");
    ai.className = "message ai";
    ai.innerHTML = `${reply}<div class="time">${now()}</div>`;
    chat.appendChild(ai);
    scrollBottom();
  })
  .catch(() => {
    typing.remove();
    const ai = document.createElement("div");
    ai.className = "message ai";
    ai.innerHTML = `‚ö†Ô∏è Server not reachable<div class="time">${now()}</div>`;
    chat.appendChild(ai);
    scrollBottom();
  });
}
</script>

</body>
</html>

